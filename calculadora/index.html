<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Taxas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #121212;
      color: #f1f1f1;
    }
    .card {
      background: #1e1e1e;
      border: none;
    }
    .form-control, .form-select {
      background: #2a2a2a;
      color: #fff;
      border: 1px solid #444;
    }
    .result-box {
      background: #0d6efd;
      border-radius: 10px;
      padding: 20px;
      color: #fff;
    }
    .small-muted {
      font-size: 0.9rem;
      opacity: 0.8;
    }
  </style>
</head>
<body>

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">

      <div class="card p-4 shadow">
        <h2 class="mb-4">üí≥ Calculadora de Taxas</h2>

        <div class="mb-3">
          <label class="form-label">Modo de c√°lculo</label>
          <select id="modo" class="form-select">
            <option value="liquido">Quero receber l√≠quido</option>
            <option value="bruto">Vou cobrar do cliente</option>
          </select>
        </div>

        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Bandeira</label>
            <select id="bandeira" class="form-select"></select>
          </div>

          <div class="col-md-6">
            <label class="form-label">Tipo de Venda</label>
            <select id="tipo" class="form-select"></select>
          </div>

          <div class="col-md-6">
            <label class="form-label">Parcelas</label>
            <select id="parcelas" class="form-select"></select>
          </div>

          <div class="col-md-6">
            <label class="form-label" id="labelValor">Valor l√≠quido desejado (R$)</label>
            <input type="number" step="0.01" id="valor" class="form-control">
          </div>
        </div>

        <button class="btn btn-primary mt-4 w-100" onclick="calcular()">Calcular</button>

        <div id="resultado" class="result-box mt-4 d-none">
          <h4>Resultado</h4>
          <p><strong>Valor cobrado:</strong> R$ <span id="valorCobrar"></span></p>
          <p><strong>Valor l√≠quido:</strong> R$ <span id="valorLiquido"></span></p>
          <p><strong>Taxas:</strong> R$ <span id="valorTaxa"></span></p>
          <p><strong>Percentual efetivo:</strong> <span id="percentual"></span>%</p>
          <p class="small-muted">O banco ganha sempre. Aqui a gente s√≥ calcula.</p>
        </div>

      </div>

    </div>
  </div>
</div>

<script>
const taxas = {
  Visa: {
    "Cr√©dito √† Vista": { taxa: 3.4 },
    "D√©bito": { taxa: 0.99 },
    "Cr√©dito Parcelado": {
      2: 4.96, 3: 5.63, 4: 6.3, 5: 7.02, 6: 7.7,
      7: 8.82, 8: 9.69, 9: 10.65, 10: 11.13, 11: 12.3, 12: 13.29
    }
  },
  Mastercard: {
    "Cr√©dito √† Vista": { taxa: 3.4 },
    "D√©bito": { taxa: 0.99 },
    "Cr√©dito Parcelado": {
      2: 4.96, 3: 5.63, 4: 6.3, 5: 7.02, 6: 7.7,
      7: 8.82, 8: 9.69, 9: 10.65, 10: 11.13, 11: 12.3, 12: 13.29
    }
  },
  Amex: {
    "Cr√©dito √† Vista": { taxa: 3.9 },
    "Cr√©dito Parcelado": {
      2: 5.56, 3: 6.23, 4: 6.9, 5: 7.62, 6: 8.3,
      7: 9.42, 8: 10.29, 9: 11.25, 10: 11.73, 11: 12.9, 12: 13.89
    }
  },
  Elo: {
    "Cr√©dito √† Vista": { taxa: 3.95 },
    "D√©bito": { taxa: 1.54 },
    "Cr√©dito Parcelado": {
      2: 5.61, 3: 6.28, 4: 6.95, 5: 7.67, 6: 8.35,
      7: 9.47, 8: 10.34, 9: 11.3, 10: 11.78, 11: 12.95, 12: 13.94
    }
  }
};

const bandeira = document.getElementById("bandeira");
const tipo = document.getElementById("tipo");
const parcelas = document.getElementById("parcelas");
const modo = document.getElementById("modo");
const labelValor = document.getElementById("labelValor");

Object.keys(taxas).forEach(b => bandeira.innerHTML += `<option>${b}</option>`);

bandeira.onchange = carregarTipos;
tipo.onchange = carregarParcelas;
modo.onchange = () => {
  labelValor.innerText = modo.value === "liquido"
    ? "Valor l√≠quido desejado (R$)"
    : "Valor que ser√° cobrado (R$)";
};

carregarTipos();

function carregarTipos() {
  tipo.innerHTML = "";
  parcelas.innerHTML = "";
  Object.keys(taxas[bandeira.value]).forEach(t => tipo.innerHTML += `<option>${t}</option>`);
  carregarParcelas();
}

function carregarParcelas() {
  parcelas.innerHTML = "";
  if (tipo.value === "Cr√©dito Parcelado") {
    Object.keys(taxas[bandeira.value][tipo.value]).forEach(p =>
      parcelas.innerHTML += `<option value="${p}">${p}x</option>`
    );
  } else {
    parcelas.innerHTML = `<option value="1">√Ä vista</option>`;
  }
}

function calcular() {
  const valor = parseFloat(document.getElementById("valor").value);
  if (!valor) return;

  const taxaPerc = tipo.value === "Cr√©dito Parcelado"
    ? taxas[bandeira.value][tipo.value][parcelas.value]
    : taxas[bandeira.value][tipo.value].taxa;

  const taxa = taxaPerc / 100;
  let bruto, liquido;

  if (modo.value === "liquido") {
    liquido = valor;
    bruto = liquido / (1 - taxa);
  } else {
    bruto = valor;
    liquido = bruto * (1 - taxa);
  }

  document.getElementById("valorCobrar").innerText = bruto.toFixed(2);
  document.getElementById("valorLiquido").innerText = liquido.toFixed(2);
  document.getElementById("valorTaxa").innerText = (bruto - liquido).toFixed(2);
  document.getElementById("percentual").innerText = taxaPerc.toFixed(2);

  document.getElementById("resultado").classList.remove("d-none");
}
</script>

</body>
</html>
